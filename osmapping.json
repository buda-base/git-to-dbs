{
  "mappings": {
    "properties": {
      "join_field": {
        "type": "join",
        "relations": {
          "instance": "etext"
        }
      },
      "merged": { "type": "keyword", "normalizer": "id_normalizer" },
      "associated_res": { "type": "keyword" },
      "creation_date": {"type": "date", "doc_values": true, "ignore_malformed": true },
      "birthDate": {"type": "date", "doc_values": true, "ignore_malformed": true },
      "deathDate": {"type": "date", "doc_values": true, "ignore_malformed": true },
      "flourishedDate": {"type": "date", "doc_values": true, "ignore_malformed": true },
      "gis_coord": { "type": "geo_point", "ignore_malformed": true },
      "graphs":  { "type": "keyword"  },
      "other_id":  { "type": "keyword", "normalizer": "id_normalizer" },
      "etext_vol": { "type": "keyword" },
      "etext_imagegroup": { "type": "keyword" },
      "volumeNumber": { "type": "short" },
      "etextNumber": { "type": "short" },
      "etext_for_instance": { "type": "keyword" },
      "etext_for_root_instance": { "type": "keyword" },
      "etext_pagination_in": { "type": "keyword" },
      "publicationDate": {"type": "date", "format" : "date_optional_time", "doc_values": true, "ignore_malformed": true },
      "firstScanSyncDate": {"type": "date", "format" : "date_optional_time", "doc_values": true, "ignore_malformed": true },
      "firstEtextSyncDate": {"type": "date", "format" : "date_optional_time", "doc_values": true, "ignore_malformed": true },
      "db_score": { "type": "half_float" },
      "db_score_in_type": { "type": "half_float" },
      "pop_score": { "type": "half_float" },
      "pop_score_in_type": { "type": "half_float" },
      "root_pop_score": { "type": "half_float" },
      "root_pop_score_in_type": { "type": "half_float" },
      "etext_instance_pop_score": { "type": "half_float" },
      "etext_instance": { "type": "keyword" },
      "pop_score_rk": { "type": "rank_feature" },
      "inRootInstance":   { "type": "keyword" },
      "type":   { "type": "keyword" },
      "inCollection":   { "type": "keyword" },
      "placeLocatedIn":   { "type": "keyword" },
      "placeType":   { "type": "keyword" },
      "associatedTradition":   { "type": "keyword" },
      "associatedCentury":   { "type": "byte" },
      "personGender":   { "type": "keyword" },
      "hasSourcePrintery": { "type": "keyword" },
      "contentMethod": { "type": "keyword" },
      "printMethod": { "type": "keyword" },
      "script": { "type": "keyword" },
      "language": { "type": "keyword" },
      "ric":   { "type": "boolean" },
      "partOf":   { "type": "keyword" },
      "partType":   { "type": "keyword" },
      "scans_access": { "type": "half_float" },
      "scans_quality": { "type": "half_float" },
      "scans_freshness": { "type": "half_float" },
      "etext_access": { "type": "half_float" },
      "etext_quality": { "type": "half_float" },
      "etext_freshness": { "type": "half_float" },
      "issueName": { "type": "keyword" },
      "workGenre": { "type": "keyword" },
      "workIsAbout": { "type": "keyword" },
      "author": { "type": "keyword" },
      "translator": { "type": "keyword" },
      "complete": { "type": "boolean" },
      "seriesName_res":  {"type": "keyword" },
      "seriesName_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "seriesName_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "summary_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "summary_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "summary_hani": { "type": "text", "analyzer": "tsconvert" , "index_options": "offsets" },
      "authorshipStatement_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "authorshipStatement_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "publisherName_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "publisherLocation_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "publisherName_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "publisherLocation_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "publisherName_hani": { "type": "text", "analyzer": "tsconvert" , "index_options": "offsets" },
      "publisherLocation_hani": { "type": "text", "analyzer": "tsconvert" , "index_options": "offsets" },
      "prefLabel_hani": { "type": "text", "analyzer": "tsconvert" , "index_options": "offsets" },
      "prefLabel_mymr": { "type": "text", "analyzer": "mymr-lenient" , "index_options": "offsets" },
      "prefLabel_khmr": { "type": "text", "analyzer": "khmr-lenient" , "index_options": "offsets" },
      "prefLabel_iast": { "type": "text", "analyzer": "iast-lenient" , "index_options": "offsets" },
      "prefLabel_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "prefLabel_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "etext_authorshipStatement_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "etext_authorshipStatement_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "etext_publisherName_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "etext_publisherLocation_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "etext_publisherName_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "etext_publisherLocation_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "etext_prefLabel_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "etext_prefLabel_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "comment_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "comment_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "comment_hani": { "type": "text", "analyzer": "tsconvert" , "index_options": "offsets" },
      "altLabel_hani": { "type": "text", "analyzer": "tsconvert" , "index_options": "offsets" },
      "altLabel_iast": { "type": "text", "analyzer": "iast-lenient" , "index_options": "offsets" },
      "altLabel_mymr": { "type": "text", "analyzer": "mymr-lenient" , "index_options": "offsets" },
      "altLabel_khmr": { "type": "text", "analyzer": "khmr-lenient" , "index_options": "offsets" },
      "altLabel_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "altLabel_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "chunks": {
        "type": "nested",
        "properties": {
          "cstart": { "type": "integer" },
          "cend": { "type": "integer" },
          "text_bo": { "type": "text", "analyzer": "tibetan-lenient" , "index_options": "offsets" },
          "text_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" }
        }
      },
      "etext_pages": {
        "type": "nested",
        "properties": {
          "cstart": { "type": "integer" },
          "cend": { "type": "integer" },
          "pnum": { "type": "short" }
        }
      }
    }
  },
  "settings": {
    "index": {
      "max_inner_result_window": 10000,
      "similarity": {
        "default": {
          "type": "BM25",
          "k1": 0.0
        }
      }
    },
    "analysis": {
      "normalizer": {
        "id_normalizer": {
          "type": "custom",
          "char_filter": [],
          "filter": [ "lowercase" ]
        }
      },
      "analyzer": {
        "tibetan-lenient": {
          "tokenizer": "tibetan",
          "filter": [ "tibetan-lenient", "tibetan-synonyms" ],
          "char_filter": [ "tibetan-lenient" ]
        },
        "tsconvert" : {
          "tokenizer" : "tsconvert"
        },
        "tibetan-ewts-lenient": {
          "tokenizer": "tibetan",
          "filter": [ "tibetan-lenient", "tibetan-synonyms" ],
          "char_filter": [ "tibetan-ewts-lenient" ]
        },
        "english-lenient": {
          "tokenizer": "standard",
          "filter": [ "asciifolding", "lowercase", "stop", "english-possessive", "english-synonyms", "english-stemmer" ],
          "char_filter": [ "simple-diacritics" ]
        },
        "iast-lenient": {
          "tokenizer": "iast",
          "char_filter": [ "iast-lenient" ]
        },
        "mymr-lenient": {
          "tokenizer": "icu_tokenizer",
          "char_filter": [ "mymr-lenient" ]
        },
        "khmr-lenient": {
          "tokenizer": "khmr",
          "char_filter": [ "khmr-lenient" ],
          "filter": [ "khmr" ]
        }
      },
      "filter": {
        "shingle_2_3": {
          "type": "shingle",
          "min_shingle_size": 2,
          "max_shingle_size": 3
        },
        "tibetan-lenient": {
          "type": "tibetan",
          "remove_affixes": true,
          "normalize_paba": true
        },
        "tibetan-synonyms": {
          "type": "synonym_graph",
          "synonyms_path": "tibetan-synonyms.txt"
        },
        "english-synonyms": {
          "type": "synonym_graph",
          "synonyms_path": "english-synonyms.txt"
        },
        "english-stemmer": {
          "type": "stemmer",
          "language": "english"
        },
        "english-possessive": {
          "type": "stemmer",
          "language": "possessive_english"
        },
        "khmr": {
          "type": "khmr"
        }
      },
      "char_filter": {
        "tibetan-lenient": {
          "type": "tibetan",
          "lenient": true
        },
        "tibetan-ewts-lenient": {
          "type": "tibetan",
          "lenient": true,
          "input_method": "ewts"
        },
        "iast-lenient": {
          "type": "iast",
          "lenient": true,
          "normalize_anusvara": true,
          "filter_geminates": true,
          "input_method": "roman"
        },
        "khmr-lenient": {
          "type": "khmr",
          "lenient_level": 3
        },
        "mymr-lenient": {
          "type": "mymr",
          "lenient": true
        }
      },
      "tokenizer" : {
        "tsconvert" : {
          "type" : "stconvert",
          "keep_both" : false,
          "convert_type" : "t2s"
        }
      }
    }
  }
}