{
  "mappings": {
    "properties": {
      "associated_res":    { "type": "keyword" },
      "creation_date": {"type": "date", "doc_values": true, "ignore_malformed": true },
      "gis_coord": { "type": "geo_point", "ignore_malformed": true },
      "graphs":  { "type": "keyword"  },
      "other_id":  { "type": "keyword" },
      "publicationDate": {"type": "date", "format" : "date_optional_time", "doc_values": true, "ignore_malformed": true },
      "firstScanSyncDate": {"type": "date", "format" : "date_optional_time", "doc_values": true, "ignore_malformed": true },
      "db_score": { "type": "rank_feature" },
      "pop_score": { "type": "rank_feature" },
      "inRootInstance":   { "type": "keyword" },
      "type":   { "type": "keyword" },
      "inCollection":   { "type": "keyword" },
      "associatedTradition":   { "type": "keyword" },
      "personGender":   { "type": "keyword" },
      "hasSourcePrintery": { "type": "keyword" },
      "printMethod": { "type": "keyword" },
      "script": { "type": "keyword" },
      "language": { "type": "keyword" },
      "author_res":   { "type": "keyword" },
      "translator_res":   { "type": "keyword" },
      "ric":   { "type": "boolean" },
      "partOf":   { "type": "keyword" },
      "partType":   { "type": "keyword" },
      "scans_access": { "type": "rank_feature" },
      "etext_access": { "type": "rank_feature" },
      "issueName": { "type": "keyword" },
      "workGenre": {
        "type": "nested",
        "properties": {
          "id": { "type": "keyword" },
          "prefLabel_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
          "prefLabel_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" }
        }
      },
      "workIsAbout": {
        "type": "nested",
        "properties": {
          "id": { "type": "keyword" },
          "prefLabel_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
          "prefLabel_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" }
        }
      },
      "author": {
        "type": "nested",
        "properties": {
          "id": { "type": "keyword" },
          "prefLabel_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
          "prefLabel_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" }
        }
      },
      "translator": {
        "type": "nested",
        "properties": {
          "id": { "type": "keyword" },
          "prefLabel_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
          "prefLabel_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" }
        }
      },
      "seriesName_res":  {"type": "keyword" },
      "seriesName_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "seriesName_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "summary_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "summary_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "authorshipStatement_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "authorshipStatement_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "publisherName_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "publisherLocation_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "publisherName_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "publisherLocation_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "prefLabel_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "prefLabel_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "comment_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "comment_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" },
      "altLabel_bo_x_ewts": { "type": "text", "analyzer": "tibetan-ewts-lenient" , "index_options": "offsets" },
      "altLabel_en": { "type": "text", "analyzer": "english-lenient" , "index_options": "offsets" }
    }
  },
  "settings": {
    "analysis": {
      "analyzer": {
        "tibetan-lenient": {
          "tokenizer": "tibetan",
          "filter": [ "tibetan-lenient", "tibetan-synonyms" ],
          "char_filter": [ "tibetan-lenient" ]
        },
        "tibetan-ewts-lenient": {
          "tokenizer": "tibetan",
          "filter": [ "tibetan-lenient", "tibetan-synonyms" ],
          "char_filter": [ "tibetan-ewts-lenient" ]
        },
        "tibetan-lenient-shingle": {
          "tokenizer": "tibetan",
          "filter": [ "tibetan-lenient", "tibetan-synonyms", "shingle_2_3" ],
          "char_filter": [ "tibetan-lenient" ]
        },
        "tibetan-ewts-lenient-shingle": {
          "tokenizer": "tibetan",
          "filter": [ "tibetan-lenient", "tibetan-synonyms", "shingle_2_3" ],
          "char_filter": [ "tibetan-ewts-lenient" ]
        },
        "english-lenient": {
          "tokenizer": "standard",
          "filter": [ "asciifolding", "lowercase", "stop", "english-possessive", "english-synonyms", "english-stemmer" ],
          "char_filter": [ "simple-diacritics" ]
        }
      },
      "filter": {
        "shingle_2_3": {
          "type": "shingle",
          "min_shingle_size": 2,
          "max_shingle_size": 3
        },
        "tibetan-lenient": {
          "type": "tibetan",
          "remove_affixes": true,
          "normalize_paba": true
        },
        "tibetan-synonyms": {
          "type": "synonym_graph",
          "synonyms_path": "tibetan-synonyms.txt"
        },
        "english-synonyms": {
          "type": "synonym_graph",
          "synonyms_path": "english-synonyms.txt"
        },
        "english-stemmer": {
          "type": "stemmer",
          "language": "english"
        },
        "english-possessive": {
          "type": "stemmer",
          "language": "possessive_english"
        }
      },
      "char_filter": {
        "tibetan-lenient": {
          "type": "tibetan",
          "lenient": true
        },
        "tibetan-ewts-lenient": {
          "type": "tibetan",
          "lenient": true,
          "input_method": "ewts"
        }
      }
    }
  }
}